var l=Object.defineProperty;var u=(n,e,t)=>e in n?l(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var i=(n,e,t)=>u(n,typeof e!="symbol"?e+"":e,t);import{h as d,q as m}from"./disclose-version.QqCXY2iz.js";import{q as f}from"./runtime.D-T8yC8_.js";import{p as h}from"./proxy.B1FLLVMe.js";function w(n,e){if(e){const t=document.body;n.autofocus=!0,f(()=>{document.activeElement===t&&n.focus()})}}function x(n){d&&n.firstChild!==null&&m(n)}let o=!1;function A(){o||(o=!0,document.addEventListener("reset",n=>{Promise.resolve().then(()=>{var e;if(!n.defaultPrevented)for(const t of n.target.elements)(e=t.__on_r)==null||e.call(t)})},{capture:!0}))}const g="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let _=(n=21)=>{let e="",t=crypto.getRandomValues(new Uint8Array(n));for(;n--;)e+=g[t[n]&63];return e};const c={next(){return _()}};function O(n){return{content:n,createdAt:Date.now()}}class p{constructor(e=c){i(this,"messages",{});this.id_provider=e}get(e){return this.messages[e]??null}insert(e,t){const s={data:t,id:e,children:new Set,parent:null};this.messages[e]=s}add(e,t){const s=this.id_provider.next();return this.insert(s,t),e&&this.link(e,s),s}get length(){return Object.keys(this.messages).length}link(e,t){this.messages[e].children.add(t),this.messages[t].parent=e}chatFrom(e,t=20){const s=[];let a=e;for(;t-- >0;){const r=this.messages[a];if(!r)break;a=r.parent,s.push(r)}return s}lastCreatedAt(){const e=Object.values(this.messages);return e.length<1?null:e.reduce((t,s)=>t.data.createdAt>s.data.createdAt?t:s)}export(){const e={},t={};for(const s of Object.values(this.messages))t[s.id]=s.data,s.parent&&(e[s.id]=s.parent);return{links:e,messages:t}}import(e){for(const[t,s]of Object.entries(e.messages))this.insert(t,s);for(const[t,s]of Object.entries(e.links))this.link(s,t)}updateTransform(e,t,s,a){const r=this.messages[e];r?r.data.transform={position:t,width:s,height:a}:console.error(`Message with id ${e} does not exist.`)}clear(){this.messages={}}}const j=h(new p(c));export{A as a,w as b,O as c,j as m,x as r};
