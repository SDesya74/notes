var o=n=>{throw TypeError(n)};var _=(n,e,t)=>e.has(n)||o("Cannot "+t);var c=(n,e,t)=>(_(n,e,"read from private field"),t?t.call(n):e.get(n)),u=(n,e,t)=>e.has(n)?o("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t);import{h as i,d as m,o as g}from"./disclose-version.BZrHNTVx.js";import{q as p,b,g as k,s as v}from"./runtime.C5r0zYmH.js";import{p as f}from"./proxy.BBwd8Nu9.js";function C(n,e,t,s){i&&m(),e===void 0||e(n,t)}function E(n,e){if(e){const t=document.body;n.autofocus=!0,p(()=>{document.activeElement===t&&n.focus()})}}function D(n){i&&n.firstChild!==null&&g(n)}let h=!1;function P(){h||(h=!0,document.addEventListener("reset",n=>{Promise.resolve().then(()=>{var e;if(!n.defaultPrevented)for(const t of n.target.elements)(e=t.__on_r)==null||e.call(t)})},{capture:!0}))}function R(n,e){var t=n.__className,s=x(e);i&&n.className===s?n.__className=s:(t!==s||i&&n.className!==s)&&(e==null?n.removeAttribute("class"):n.className=s,n.__className=s)}function x(n){return n??""}function q(n,e,t){t?n.classList.add(e):n.classList.remove(e)}function I(n){var t;var e=(t=n.$$slots)==null?void 0:t.default;return e===!0?n.children:e}const y="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let w=(n=21)=>{let e="",t=crypto.getRandomValues(new Uint8Array(n));for(;n--;)e+=y[t[n]&63];return e};const d={next(){return w()}};function M(n){return{content:n,createdAt:Date.now(),transform:{x:0,y:0,width:100,height:40}}}var r;class A{constructor(e=d){u(this,r,b(f({})));this.id_provider=e}get inner(){return k(c(this,r))}set inner(e){v(c(this,r),f(e))}get(e){return this.inner[e]??null}insert(e,t){const s={data:t,id:e,children:new Set,parent:null};this.inner[e]=s}add(e,t){const s=this.id_provider.next();return this.insert(s,t),e&&this.link(e,s),s}delete(e){const t=this.inner[e];t&&(t.children.size>0&&t.parent&&t.children.forEach(s=>{this.link(t.parent,s)}),t.parent&&this.unlink(t.parent,e),delete this.inner[e])}get length(){return Object.keys(this.inner).length}link(e,t){this.inner[e].children.add(t),this.inner[t].parent=e}unlink(e,t){this.inner[e].children.delete(t),this.inner[t].parent=null}isLeaf(e){return this.inner[e].children.size===0}chatFrom(e,t=20){const s=[];let a=e;for(;t-- >0;){const l=this.inner[a];if(!l)break;a=l.parent,s.push(l)}return s}untilBranchOrLeaf(e){let t=e;for(;t;){const s=this.inner[t];if(!s||s.children.size!==1)break;t=s.children.values().next().value}return t}lastCreatedAt(){const e=Object.values(this.inner);return e.length<1?null:e.reduce((t,s)=>t.data.createdAt>s.data.createdAt?t:s)}export(){const e={},t={};for(const s of Object.values(this.inner))t[s.id]=s.data,s.parent&&(e[s.id]=s.parent);return{links:e,messages:t}}import(e){for(const[t,s]of Object.entries(e.messages))this.insert(t,s);for(const[t,s]of Object.entries(e.links))this.link(s,t)}clear(){this.inner={}}}r=new WeakMap;const V=new A(d);export{P as a,E as b,M as c,I as d,R as e,V as m,D as r,C as s,q as t};
